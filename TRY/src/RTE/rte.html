<link rel="import" href="../wrapper/vis-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../rdf-data-store/rdf-store-reader-element.html">
<dom-module id="main-rte">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <!--<h1>RTE<span style="color:blue">#[[name]]</span></h1>-->
    <rdf-store-reader-element id="FRE" graph="{{graph}}"></rdf-store-reader-element>
    <paper-input label="Number of nodes" type="number" value="{{valNbNodes}}">
    </paper-input>
    <div id="ttest" on-tap="tapFunc">DisplayRDFGraphValue</div>
    <vis-element id="truc"></vis-element>
    <!-- <rdflib-element id="chouette"></rdflib-element> -->
  </template>
  <script>
    Polymer({
      is: 'main-rte',

      properties: {
        name :{
          type: String,
          notify: true,
          value: "455577781"
        },
        valNbNodes: {
          type: Number,
          value: 5,
          notify: true,
          observer: "updateNbNodes"
        },
        rdfStore: {
          type: Object,
          value: function(){return {};},
          // observer: "_rdfStoreChanged",
        },
        graph:
        {
          type: Object,
          value: function(){return {};},
          reflectToAttribute: true,
          observer: "_onGraphChanged",
          notify: true,
        },
      },

      // observers: [
      //   '_onGraphChanged(graph)'
      // ],

      ready: function(){
        // this.$.FRE.returnFunction = function(){
        //   console.log("Wesh");
        // }
      },
      tapFunc: function(){
        console.log(this.graph);
      },
      _rdfStoreChanged: function(e)
      {
        if(Object.keys(this.rdfStore).length === 0 && this.rdfStore.constructor === Object)
          return;

        //this.$.rdsp.createClassesProperties();
        console.log("Oh");
      },
      updateNbNodes: function(){

        this.$.truc.setNodes(this.valNbNodes);

      },
      _onGraphChanged: function(n,o)
      {
        if(Object.keys(this.graph).length === 0 && this.graph.constructor === Object)
          return;

        console.log("CALL:_graphChanged("+n+","+o+")");
        console.log(o);
        console.log(n);
      }
    });
  </script>
</dom-module>
