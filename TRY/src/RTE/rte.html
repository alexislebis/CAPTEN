<link rel="import" href="../wrapper/vis-element.html">
<link rel="import" href="../wrapper/rdflib-element.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../rdf-data-store/rdf-data-store-reader-element.html">
<link rel="import" href="../rdf-data-store/rdf-data-store-parser-element.html">
<dom-module id="main-rte">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <!--<h1>RTE<span style="color:blue">#[[name]]</span></h1>-->
    <rdf-data-store-reader-element id="FRE" store="{{rdfStore}}"></rdf-data-store-reader-element>
    <rdf-data-store-parser-element id="rdsp" store="{{rdfStore}}"></rdf-data-store-parser-element>
    <paper-input label="Number of nodes" type="number" value="{{valNbNodes}}">
    </paper-input>
    <vis-element id="truc"></vis-element>
    <rdflib-element id="chouette"></rdflib-element>
  </template>
  <script>
    Polymer({
      is: 'main-rte',

      properties: {
        name :{
          type: String,
          notify: true,
          value: "455577781"
        },
        valNbNodes: {
          type: Number,
          value: 5,
          notify: true,
          observer: "updateNbNodes"
        },
        rdfStore: {
          type: Object,
          value: function(){return {};},
          observer: "_dataStoreChanged",
        },
      },
      ready: function(){
        this.$.FRE.returnFunction = function(){
          console.log("Wesh");
        }
      },
      _dataStoreChanged: function(e)
      {
        if(Object.keys(this.rdfStore).length === 0 && this.rdfStore.constructor === Object)
          return;

        this.$.rdsp.createClassesProperties();
      },
      updateNbNodes: function(){

        this.$.truc.setNodes(this.valNbNodes);

      },
    });
  </script>
</dom-module>
