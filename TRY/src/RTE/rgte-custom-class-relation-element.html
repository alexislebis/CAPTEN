<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">


<dom-module id="rgte-custom-class-relation-element">

    <template>
    <style>
      :host {
        display: block;
      }
    </style>


      <form is="iron-form" method="get" action="/" id="Form" on-iron-form-submit="submitForm">
        <template is="dom-repeat" items="{{nbOfForms}}">

          <paper-dropdown-menu label="Domain" name="type" required>
              <paper-menu class="dropdown-content" id="menu{{item}}">
                  <template is="dom-repeat" items="[[classes]]" as="cls">
                      <paper-item value$="[[cls.id]]">[[cls.label]]</paper-item>
                  </template>
                </paper-menu>
              </paper-dropdown-menu>

          </template>

          <iron-icon icon="add-circle" on-tap="_addNewMenu" class="addToRTE"></iron-icon>
      </form>




  </template>
    <script>
        Polymer(
        {
            is: "rgte-custom-class-relation-element",

            properties:
            {
              nbOfForms:
              {
                type: Array,
                notify: true,
                value: [1],
              },

              vocab:
              {
                type: Object,
                //value: function(){return new CONTROLLED_VOCABULARY();},
              },

              rgte:
              {
                type: Object,
              },

              classes:
              {
                type: Object,
                notify: true,
              },

              rgteNode:
              {
                type: Object,
              },
            },



            attached: function()
            {
              this.vocab.registerObserverCallbackOnChange(this, this._onVocabularyChange);
              this.rgte.registerObserverCallbackOnChange(this, this._onRGTEChange);
            },

// === OBSERVER
            _onVocabularyChange: function()
            {
              this._updateClassesToDisplay();
            },

            _onRGTEChange: function()
            {

            },
// ===

            focusedClass: function(cl)
            {

            },

            _addNewMenu: function()
            {
              this.push('nbOfForms',this.nbOfForms[this.nbOfForms.length-1]++);
            },

            _updateClassesToDisplay: function()
            {
              console.log('couco');

              this.classes = [];
              this.classes = this.vocab.getClasses();

              return this.classes;
            },
        });
    </script>
</dom-module>
