<link rel="import" src="./Displayers/statement-displayer-element.html">
<link rel="import" src="./Displayers/statement-namer-element.html">

<dom-module id="narrative-block-displayer-element">
  <template>
      <style>
        :host {
          display: block;
        }
      </style>

      <statement-displayer-element statement="{{tmpsctfstmt}}"></statement-displayer-element>
      <statement-namer-element statement="{{tmpsctfstmt}}"></statement-namer-element>

      <template id="narrativeBlockExists" is="dom-if" if="{{_narrativeBlockConfigured(nbConfigured)}}" restamp>

        <template is="dom-repeat" items="{{narrativeblock.elements}}">

          <template is="dom-if" if="{{_isStatement(item.name)}}" restamp>
            trying to boot statement-displayer-element
            {{tmpsctfstmt.name}}
            <statement-displayer-element statement={{tmpsctfstmt}}></statement-displayer-element>
          </template>

        </template>

      </template>

      <paper-button raised on-click='test'></paper-button>



  </template>
  <script>
  Polymer({
    is: 'narrative-block-displayer-element',

    properties:
    {
      narrativeblock:
      {
        type: Object,
        notify: true,
        value: function(){return new NarrativeBlock();},
      },

      nbConfigured:
      {
        type: Boolean,
        notify: true,
        value: false,
      },

      tmpsctfstmt:
      {
        type: Object,
        notify: true,
        value: function(){ val = new ScientificStatement(); val.is('Hypothesis'); return val;}
      },
    },

    _narrativeBlockConfigured: function(nbConfigured)
    {
      if(this.narrativeblock == null || this.narrativeblock.propertyEntity == null)
        this.nbConfigured = false;
      else
        this.nbConfigured = true;

      return this.nbConfigured;
    },

    test: function()
    {
      this.narrativeblock.propertyEntity = 1;

      this.narrativeblock.elements.push(new Statement());
      this.narrativeblock.elements.push(2);

      this.nbConfigured = !this.nbConfigured;
    },

    _isStatement: function(item)
    {
      console.log(item);
      if(item == null)
        return false;
      if(item == "Statement")
        return true;
      return false;
    },

  });
  </script>

</dom-module>
