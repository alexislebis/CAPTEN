<!-- narrative-block-cascader-display-element allow to encapsulate the behavior of signaling to display the narrative block
of the element when clicked  -->

<link rel="import" href="./narrative-block-displayer-element.html">

<dom-module id="narrative-block-cascader-display-element">
  <template>
    <style>
    :host {
      display: block;
    }
    </style>

    <template is="dom-if" if="{{hasNarrativeBlock}}" restamp="true">
      <template is="dom-if" if="{{!isDisplayActivated}}" restamp="true">
        <iron-icon icon="icons:arrow-drop-down-circle" on-click="_notifyCascade"></iron-icon>
      </template>
      <template is="dom-if" if="{{isDisplayActivated}}" restamp="true">
        <iron-icon icon="icons:cancel" on-click="_notifyCascade"></iron-icon>
        <narrative-block-displayer-element narrativeblock="{{narrativeblock}}"}></narrative-block-displayer-element>
      </template>
    </template>

  </template>
  <script>
    Polymer({
      is : "narrative-block-cascader-display-element",

      properties:
      {
        entity:
        {
          type: Object,
          notify: true,
          observer: "_updateNarrativeBlock4Element",
        },
        isDisplayActivated:
        {
          type: Boolean,
          notify: true,
          value: false,
        },
        hasNarrativeBlock:
        {
          type: Boolean,
          notify: true,
          value: false,
        },
        narrativeblock:
        {
          type: Object,
          notify: true,
        },
      },

      _notifyCascade: function()
      {
        this._updateNarrativeBlock4Element();
        this.isDisplayActivated = !this.isDisplayActivated;
      },

      _updateNarrativeBlock4Element: function()
      {
        if(this.entity == null)
          return;

        this.narrativeblock = this.entity.getNarrativeBlock();

        if(this.narrativeblock != null)
          this.hasNarrativeBlock = true;
        else
          this.hasNarrativeBlock = false;
      },

    });
    </script>
  </dom-module>
