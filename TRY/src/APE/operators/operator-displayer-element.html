<!--NOTE Display parent & child relations, linked concept & linked production with others operators
Display expected input pattern, some example, description, review, etc... -->
<!--IDEA Display parent & child relations, linked concept & linked production with others operators
Display expected input pattern, some example, description, review, etc... -->
<link rel="import" href="../../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/paper-card/paper-card.html">


<dom-module id="operator-displayer-element">
  <template>
  <style>
    :host {
      display: block;
    }
  </style>

 <!--FIXME focus issue -->
  <paper-card heading="{{operator.usualName}}" on-tap="_manageSelection">
    <div class="card-content">
      <div class="operator-header">{{operator.usualName}} operation
      </div>

      <p class="card-light">
        <iron-icon icon="description" class="icon">description</iron-icon>{{operator.annotation.content}}
      </p>

      <p><iron-icon icon="account-circle" class="icon">account-circle</iron-icon> {{operator.author.authorName}}</p>
      <p><iron-icon icon="event" class="icon">event</iron-icon> {{operator.creationDate}}</p>

    </div>
    <div class="card-actions">
      <template is="dom-if" if="{{isUseSectionAvailable}}" restamp="true">
        <p>
          SELECT IT
          <paper-icon-button icon$="[[_computeSelection(isSelected)]]" class="icon" on-tap="_useCard"></paper-icon-button>
        </p>
      </template>

      <div class="horizontal justified">

        <paper-button on-click="_togglePatternCllp">PATTERN</paper-button>
        <paper-button on-click="_toggleExamplesCllp">EXAMPLES</paper-button>
        <paper-button on-click="_toggleUsedCllp">USED IN</paper-button>
      </div>

      <iron-collapse id="showPattern" style="width:100%;">
        <p>VIS PATTERN HERE</p>
      </iron-collapse>

      <iron-collapse id="showExamples" style="width:100%;">
        <p>EXAMPLES OF USE HERE</p>
      </iron-collapse>

      <iron-collapse id="showUsedIn" style="width:100%;">
        <p>IAP USING THIS IOP HERE</p>
      </iron-collapse>

    </div>
  </paper-card>

</template>
<script>
Polymer({
  is: 'operator-displayer-element',

  properties:
  {
    operator:
    {
      type: Object,
      notify: true,
      value: function(){return {}},
      observer: "_onOperatorChange",
    },
    isSelected:
    {
      type: Boolean,
      value: false,
      notify: true,
    },
    isUseSectionAvailable:
    {
      type: Boolean,
      value: false,
      notify: true,
    },
  },

  _onOperatorChange: function(e)
  {
    console.log(this.operator);
  },

  _computeSelection: function(isSelected)
  {
    // FIXME when selection will be managed by the operators-lister-element on the dom-repeat, use : return isSelected ? "add-circle" : "radio-button-unchecked";
    return "add-circle";
  },

  //TOGGLE FUNCTIONS FOR CARD ACTIONS
  _togglePatternCllp: function(e){
    this.$.showPattern.toggle();
    this.$.showExamples.opened = false;
    this.$.showUsedIn.opened = false;
  },
  _toggleExamplesCllp: function(e){
    this.$.showPattern.opened = false;
    this.$.showExamples.toggle();
    this.$.showUsedIn.opened = false;
  },
  _toggleUsedCllp: function(e){
    this.$.showPattern.opened = false;
    this.$.showExamples.opened = false;
    this.$.showUsedIn.toggle();
  },

  _manageSelection: function(e)
  {
    if(this.isSelected)
      return;

    this.isSelected = true;
    this.fire("cardselected", {operator : this.operator});
  },

  setSelection: function(bool)
  {
    this.isSelected = bool;
  },

  _useCard: function(change)
  {
    this.fire("addcard", {operator: this.operator});
  },
});

</script>
</dom-module>
