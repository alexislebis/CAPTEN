<link rel="import" href="my-app/my-app.html">
<link rel="import" href="APE/ape-element.html">
<link rel="import" href="RTE/rte.html">
<link rel="import" href="VOOG/voog.html">
<link rel="import" href="wrapper/vis-element.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">


<dom-module id="main-seed">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <app-location use-hash-as-path route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/tabs" tail="{{tabsRoute}}" active="{{tabsActive}}"></app-route>
    <app-route route="{{tabsRoute}}" pattern="/:tabName" data="{{data}}"></app-route>

    <paper-tabs selected='{{data.tabName}}'  fit-container attr-for-selected="name">
            <paper-tab name="rte">RTE</paper-tab>
            <paper-tab name="voog">VOOG</paper-tab>
            <paper-tab name="ape">APE</paper-tab>
    </paper-tabs>

    <iron-pages selected='{{data.tabName}}' attr-for-selected="name">
      <div name="rte" ><main-rte id="rteElem" vocab="{{vocab}}" customcls="{{customcls}}" customprops="{{customprops}}"></main-rte></div>
      <div name="voog"><main-voog></main-voog></div>
      <div name="ape"><ape-element id="apeElem" rgtes="{{rgtes}}" vocab="{{vocab}}" customcls="{{customcls}}" customprops="{{customprops}}"></ape-element></div>
    </iron-pages>

    <h1>{{data.page}}</h1>

  </template>
  <script>
    Polymer({
      is: 'main-seed',

      properties:
      {
        data: String,
        tabsRoute: String,
        tabsActive: String,

        rgtes:{
          type: Array,
          notify: true,
          value: function(){return [];},
        },

        vocab:
        {
          type: Object,
          value: function(){ return new CONTROLLED_VOCABULARY();},
        },
        customcls://used for file-reader
        {
            type: Array,
            notify: true,
            value: function()
            {
                return [];
            },
        },
        customprops:
        {
            type: Array,
            notify: true,
            value: function()
            {
                return [];
            },
        },

      },

      attached: function()
      {
        this.$.rteElem.addEventListener("-RGTEAddedToTheBag", function(e)
        {
          console.log("WARNING: Currently, only one RGTE can be used simultaneously.");//TODO
          // this.rgtes = [];
          this.push('rgtes', e.detail);
        }.bind(this));
      },


    });
  </script>
</dom-module>
